<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>万物互联-java-c</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="万物互联-java-c">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="万物互联-java-c">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Oscar">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="万物互联-java-c" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">万物互联-java-c</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-万物互联-java-c" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/09/%E4%B8%87%E7%89%A9%E4%BA%92%E8%81%94-java-c/" class="article-date">
  <time class="dt-published" datetime="2021-01-09T12:49:51.284Z" itemprop="datePublished">2021-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/09/%E4%B8%87%E7%89%A9%E4%BA%92%E8%81%94-java-c/">万物互联---Java与Esp8266的梦幻联动-后续</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在自己力所不能及的地方，自己的未来就这么被觉定了，无论自己多么努力也有无法改变的东西，这是非常不公平的——前言<br>author: Oscar</p>
<h2 id="这次我直接写干货吧"><a href="#这次我直接写干货吧" class="headerlink" title="这次我直接写干货吧"></a>这次我直接写干货吧</h2><h3 id="1-搭建springboot"><a href="#1-搭建springboot" class="headerlink" title="1.搭建springboot"></a>1.搭建springboot</h3><p>以下是依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot; xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 https:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;</span><br><span class="line">    &lt;groupId&gt;com.example&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;demo&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;name&gt;demo&lt;&#x2F;name&gt;</span><br><span class="line">    &lt;description&gt;Demo project for Spring Boot&lt;&#x2F;description&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;&#x2F;java.version&gt;</span><br><span class="line">        &lt;project.build.sourceEncoding&gt;UTF-8&lt;&#x2F;project.build.sourceEncoding&gt;</span><br><span class="line">        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;&#x2F;project.reporting.outputEncoding&gt;</span><br><span class="line">        &lt;spring-boot.version&gt;2.3.0.RELEASE&lt;&#x2F;spring-boot.version&gt;</span><br><span class="line">    &lt;&#x2F;properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;!--spring boot 2.0以后默认使用lettuce--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;!--lettuce 依赖commons-pool--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.commons&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;commons-pool2&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;redis.clients&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jedis&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;fastjson&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.1.41&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.zhenzi&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;zhenzisms&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.0.1&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;&#x2F;artifactId&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.mybatis.spring.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mybatis-spring-boot-starter&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.1.2&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;scope&gt;runtime&lt;&#x2F;scope&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;org.junit.vintage&lt;&#x2F;groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;junit-vintage-engine&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;&#x2F;exclusion&gt;</span><br><span class="line">            &lt;&#x2F;exclusions&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">    &lt;&#x2F;dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;$&#123;spring-boot.version&#125;&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;&#x2F;type&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;&#x2F;scope&gt;</span><br><span class="line">            &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;&#x2F;dependencies&gt;</span><br><span class="line">    &lt;&#x2F;dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-compiler-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;3.8.1&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;source&gt;1.8&lt;&#x2F;source&gt;</span><br><span class="line">                    &lt;target&gt;1.8&lt;&#x2F;target&gt;</span><br><span class="line">                    &lt;encoding&gt;UTF-8&lt;&#x2F;encoding&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;2.3.0.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;mainClass&gt;com.example.demo.DemoApplication&lt;&#x2F;mainClass&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;repackage&lt;&#x2F;id&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;repackage&lt;&#x2F;goal&gt;</span><br><span class="line">                        &lt;&#x2F;goals&gt;</span><br><span class="line">                    &lt;&#x2F;execution&gt;</span><br><span class="line">                &lt;&#x2F;executions&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line">    &lt;&#x2F;build&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后是配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name&#x3D;demo</span><br><span class="line"># 应用服务 WEB 访问端口</span><br><span class="line">server.port&#x3D;443</span><br><span class="line">server.ssl.enabled&#x3D;true</span><br><span class="line">server.ssl.key-store-type&#x3D;jks</span><br><span class="line">server.ssl.key-store&#x3D; C:\\fzulyt.fun.jks</span><br><span class="line">server.ssl.key-store-password&#x3D;***********</span><br><span class="line"># Actuator Web 访问端口</span><br><span class="line">management.server.port&#x3D;8081</span><br><span class="line">mybatis.mapper-locations&#x3D;classpath:mappers&#x2F;*Mapper.xml</span><br><span class="line">mybatis.type-aliases-package&#x3D;com.example.demo.dao.entity</span><br><span class="line">spring.datasource.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:****&#x2F;****?serverTimezone&#x3D;UTC</span><br><span class="line">spring.datasource.username &#x3D; ***</span><br><span class="line">spring.datasource.password &#x3D; *******</span><br><span class="line">spring.datasource.driverClassName &#x3D; com.mysql.cj.jdbc.Driver</span><br><span class="line">spring.redis.host&#x3D;127.0.0.1</span><br><span class="line">spring.redis.port&#x3D;6379</span><br><span class="line">spring.redis.database&#x3D;0</span><br><span class="line">spring.redis.password&#x3D;</span><br><span class="line">spring.redis.lettuce.pool.max-active&#x3D;8</span><br><span class="line">spring.redis.lettuce.pool.max-wait&#x3D;-1ms</span><br><span class="line">spring.redis.lettuce.pool.max-idle&#x3D;5</span><br><span class="line">spring.redis.lettuce.pool.min-idle&#x3D;0</span><br><span class="line">spring.redis.timeout&#x3D;10000ms</span><br></pre></td></tr></table></figure>
<p>涉及隐私的我换成*了</p>
<h3 id="2-写接口"><a href="#2-写接口" class="headerlink" title="2.写接口"></a>2.写接口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;a&quot;)</span><br><span class="line">   public String d(HttpServletRequest request, HttpServletResponse response)&#123;</span><br><span class="line">       String origin &#x3D; request.getHeader(&quot;Origin&quot;);</span><br><span class="line">       response.setHeader(&quot;Access-Control-Allow-Origin&quot;,origin);</span><br><span class="line">       response.setHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;);</span><br><span class="line">      </span><br><span class="line">       return &quot;a&quot;;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-esp8266部分"><a href="#3-esp8266部分" class="headerlink" title="3.esp8266部分"></a>3.esp8266部分</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;Arduino.h&gt;  </span><br><span class="line">  </span><br><span class="line">#include &lt;ESP8266WiFi.h&gt;  </span><br><span class="line">#include &lt;ESP8266WiFiMulti.h&gt;  </span><br><span class="line">  </span><br><span class="line">#include &lt;ESP8266HTTPClient.h&gt;  </span><br><span class="line">  </span><br><span class="line">#include &lt;WiFiClientSecureBearSSL.h&gt;  </span><br><span class="line">&#x2F;&#x2F; Fingerprint for demo URL, expires on June 2, 2019, needs to be updated well before this date  </span><br><span class="line">&#x2F;&#x2F; const uint8_t fingerprint[20] &#x3D; &#123;0x5A, 0xCF, 0xFE, 0xF0, 0xF1, 0xA6, 0xF4, 0x5F, 0xD2, 0x11, 0x11, 0xC6, 0x1D, 0x2F, 0x0E, 0xBC, 0x39, 0x8D, 0x50, 0xE0&#125;;  </span><br><span class="line">  </span><br><span class="line">ESP8266WiFiMulti WiFiMulti;  </span><br><span class="line">  </span><br><span class="line">void setup() &#123;  </span><br><span class="line">  </span><br><span class="line">  Serial.begin(115200);  </span><br><span class="line">  &#x2F;&#x2F; Serial.setDebugOutput(true);  </span><br><span class="line">  </span><br><span class="line">  Serial.println();  </span><br><span class="line">  Serial.println();  </span><br><span class="line">  Serial.println();  </span><br><span class="line">  </span><br><span class="line">  for (uint8_t t &#x3D; 4; t &gt; 0; t--) &#123;  </span><br><span class="line">     </span><br><span class="line">    Serial.flush();  </span><br><span class="line">    delay(1000);  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">  WiFi.mode(WIFI_STA);  </span><br><span class="line">  WiFiMulti.addAP(&quot;OSCAR&quot;, &quot;**********&quot;);  </span><br><span class="line">&#125;  </span><br><span class="line">  </span><br><span class="line">void loop() &#123;  </span><br><span class="line">  &#x2F;&#x2F; wait for WiFi connection  </span><br><span class="line">  if ((WiFiMulti.run() &#x3D;&#x3D; WL_CONNECTED)) &#123;  </span><br><span class="line">  </span><br><span class="line">    std::unique_ptr&lt;BearSSL::WiFiClientSecure&gt;client(new BearSSL::WiFiClientSecure);  </span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F;client-&gt;setFingerprint(fingerprint);  </span><br><span class="line">    client-&gt;setInsecure();  </span><br><span class="line">  </span><br><span class="line">    HTTPClient https;  </span><br><span class="line">  </span><br><span class="line">     </span><br><span class="line">    if (https.begin(*client, &quot;https:&#x2F;&#x2F;www.fzulyt.fun&#x2F;user&#x2F;a&quot;)) &#123;  &#x2F;&#x2F; HTTPS  </span><br><span class="line">  </span><br><span class="line">        </span><br><span class="line">      &#x2F;&#x2F; start connection and send HTTP header  </span><br><span class="line">      int httpCode &#x3D; https.GET();  </span><br><span class="line">  </span><br><span class="line">      &#x2F;&#x2F; httpCode will be negative on error  </span><br><span class="line">      if (httpCode &gt; 0) &#123;  </span><br><span class="line">        &#x2F;&#x2F; HTTP header has been send and Server response header has been handled  </span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">        &#x2F;&#x2F; file found at server  </span><br><span class="line">        if (httpCode &#x3D;&#x3D; HTTP_CODE_OK || httpCode &#x3D;&#x3D; HTTP_CODE_MOVED_PERMANENTLY) &#123;  </span><br><span class="line">          String payload &#x3D; https.getString();  </span><br><span class="line">          Serial.println(payload);  </span><br><span class="line">        &#125;  </span><br><span class="line">      &#125; else &#123;  </span><br><span class="line">        </span><br><span class="line">      &#125;  </span><br><span class="line">  </span><br><span class="line">      https.end();  </span><br><span class="line">    &#125; else &#123;  </span><br><span class="line">        </span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;  </span><br><span class="line">  </span><br><span class="line">   </span><br><span class="line">  delay(5000);  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>如你所见，这是修改过的https请求。</p>
<h3 id="3-arduino部分"><a href="#3-arduino部分" class="headerlink" title="3.arduino部分"></a>3.arduino部分</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#define PIN_LED 13</span><br><span class="line">void setup() &#123;</span><br><span class="line">  &#x2F;&#x2F; put your setup code here, to run once:</span><br><span class="line">Serial.begin(115200);</span><br><span class="line">pinMode(PIN_LED,OUTPUT); </span><br><span class="line">&#125;</span><br><span class="line">char data;</span><br><span class="line">void loop() &#123;</span><br><span class="line">  &#x2F;&#x2F; put your main code here, to run repeatedly:</span><br><span class="line">  </span><br><span class="line">if(Serial.available() &gt; 0)&#123;</span><br><span class="line">  </span><br><span class="line">data &#x3D; Serial.read();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">if (data&#x3D;&#x3D;&#39;k&#39;)&#123;</span><br><span class="line">  Serial.println(&quot;yes&quot;);</span><br><span class="line">  digitalWrite(PIN_LED,HIGH);</span><br><span class="line">  delay(1000);</span><br><span class="line">   digitalWrite(PIN_LED,LOW);</span><br><span class="line">  &#125;</span><br><span class="line">Serial.println(data);</span><br><span class="line">Serial.println(&quot;---&quot;);</span><br><span class="line">delay(1000);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到这就结束了，esp8266和服务器可以正常连接，获取返回数据，至于之后的作品，得等寒假了<br>可能会做成老人身体监测器或宿舍app开门吧<br>buybuy</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/09/%E4%B8%87%E7%89%A9%E4%BA%92%E8%81%94-java-c/" data-id="ckjpqpf8w0000jwtr6ym8a2wr" data-title="万物互联---Java与Esp8266的梦幻联动-后续" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/01/09/%E4%B8%87%E7%89%A9%E4%BA%92%E8%81%94-java-c/">万物互联---Java与Esp8266的梦幻联动-后续</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Oscar<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>